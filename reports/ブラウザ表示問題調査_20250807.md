# ブラウザ表示問題調査報告書

## 調査日時
2025年8月7日

## 問題の概要
- **症状**: curlコマンドではhttp://localhost:8090にアクセス可能だが、Chromeブラウザでは表示できない
- **環境**: Docker環境でWordPress 6.4 + Apache + PHP 8.2

## 調査結果

### 1. 動作確認状況
- ✅ Dockerコンテナは正常起動
- ✅ Apache設定は適切
- ✅ ポートマッピング（8090:80）は正しく設定
- ✅ WordPressテーマファイル（index.php、header.php、footer.php等）は存在

### 2. 問題の根本原因

#### 主要原因: Tailwind CSSの欠落
**テンプレートファイルとCSSの不整合が発生しています。**

- **現状**: 
  - header.php、footer.php、front-page.phpがTailwind CSSクラスを使用
  - style.cssには基本的なCSSのみで、Tailwind CSSが含まれていない
  - enqueue.phpでTailwind CSSの読み込みがない

- **具体例**:
  ```php
  // header.phpより抜粋
  <header class="bg-white/95 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-50">
  <nav class="max-w-6xl mx-auto px-4 py-4">
  ```
  
  これらのクラス（bg-white/95、max-w-6xl等）はTailwind CSSのユーティリティクラスですが、実際には読み込まれていません。

### 3. 影響範囲
- **ブラウザでの表示**: HTMLは返されるが、スタイルが適用されずレイアウトが完全に崩れる
- **curlでの確認**: HTMLの構造のみ確認可能で、スタイルの問題は検出されない
- **ユーザー体験**: サイトが実質的に使用不能状態

### 4. その他の発見事項

#### セカンダリな問題
1. **getenv_docker関数の順序問題**
   - wp-config.docker.phpで関数が定義される前に使用されている
   - PHPエラーが発生する可能性がある

2. **画像URLの外部依存**
   - front-page.phpで外部APIの画像URLを直接使用
   - 外部サービスへの依存がセキュリティリスクとなる可能性

## 推奨される修正アプローチ

### 即時対応（優先度: 高）
1. Tailwind CSSの追加または削除
   - オプション1: Tailwind CSSを適切に追加
   - オプション2: Tailwind CSSクラスを通常のCSSに置き換え

### 中期対応（優先度: 中）
1. wp-config.docker.phpの関数定義順序の修正
2. 画像の内部管理への移行

### 確認項目
- WordPressの初期セットアップが完了しているか
- データベースへの接続が正常か
- プラグインのエラーがないか

## 結論
ブラウザで表示できない主原因は、**Tailwind CSSクラスを使用しているにも関わらず、Tailwind CSS自体が読み込まれていない**ことです。これにより、HTMLは正常に出力されますが、視覚的なレイアウトが完全に崩れ、実質的に表示不能となっています。

## 次のステップ
修正設計書に基づいて、段階的に問題を解決していく必要があります。
# CSS崩れ問題調査レポート
作成日: 2025-08-07
調査者: Claude Code

## 問題の概要
WordPressテーマ「Kei Portfolio Pro」において、画面は表示されるがCSSが適用されず、スタイルが崩れている。

## 調査結果サマリー

### 根本原因
**Tailwind CSS CDNの読み込み方法が根本的に誤っている**

enqueue.phpファイルの32行目で`https://cdn.tailwindcss.com`をCSS（スタイルシート）として読み込もうとしているが、これは**JavaScriptファイル**であるため、正しく機能していない。

## 詳細な調査結果

### 1. Tailwind CSS読み込みの問題

#### 現在の実装（誤り）
```php
// enqueue.php 29-34行目
wp_enqueue_style( 
    'tailwindcss', 
    'https://cdn.tailwindcss.com',  // ❌ これはJavaScriptファイル
    array(), 
    '3.4.0' 
);
```

#### 問題点
- `cdn.tailwindcss.com`はPlay CDN（JavaScriptベース）のURL
- `wp_enqueue_style`はCSSファイル用の関数
- JavaScriptファイルをCSSとして読み込もうとしているため機能しない

### 2. テーマのCSS構成分析

#### style.css
- 独自のCSS変数とユーティリティクラスを定義
- Tailwind CSSのクラスはほとんど含まれていない
- 最小限のカスタムクラス（bg-blue-100など）のみ実装

#### front-page.php
- **大量のTailwind CSSクラスを使用**
  - `min-h-screen`
  - `bg-gradient-to-r`
  - `grid-cols-1`
  - `hover:scale-105`
  - `rounded-full`
  - その他多数

### 3. ビルドプロセスの不在

#### 欠落しているファイル
- ❌ `tailwind.config.js` - 存在しない
- ❌ `webpack.config.js` - テーマディレクトリ直下に存在しない
- ❌ `postcss.config.js` - 存在しない

#### package.json
- Tailwind CSS関連の依存関係が一切含まれていない
- PostCSSはdevDependenciesに存在するが、Tailwind CSSプラグインがない
- webpackの設定はあるが、Tailwind CSSのビルドプロセスが組み込まれていない

### 4. HTML構造の依存関係

テンプレートファイル全体がTailwind CSSのユーティリティクラスに完全に依存している構造になっている。これらのクラスが機能しないため、以下の問題が発生：

- レイアウトの崩壊
- レスポンシブデザインの機能不全
- ホバーエフェクトの消失
- カラースキームの適用不可

## 技術的制約

### CDN版Tailwind CSSの制限
1. **Play CDN（JavaScript版）**
   - ブラウザ内でJITコンパイル
   - パフォーマンス面で本番環境には不適切
   - カスタム設定に制限がある

2. **ビルド済みCSS CDN**
   - すべてのユーティリティクラスを含む巨大なファイル（3MB以上）
   - 未使用のCSSが大量に含まれる
   - パフォーマンスに悪影響

## 影響範囲

### 影響を受けるファイル
- すべてのテンプレートファイル（*.php）
- 特にfront-page.php、template-partsディレクトリ内のすべてのファイル

### ユーザー体験への影響
- ページの見た目が完全に崩壊
- モバイル対応が機能しない
- インタラクティブな要素が正しく表示されない

## 推奨される解決策

### 短期的解決策（即座に機能）
1. Tailwind CSS Play CDNを**JavaScript**として正しく読み込む
2. ビルド済みのTailwind CSS CDNを使用

### 長期的解決策（推奨）
1. 適切なビルドプロセスの構築
2. Tailwind CSSのカスタム設定
3. PurgeCSSによる未使用CSSの削除

## 次のステップ
1. CSS修正設計書の作成
2. 段階的な実装計画の策定
3. テスト環境での検証